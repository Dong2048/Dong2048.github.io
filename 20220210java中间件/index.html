<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>java中间件 | 董帅的个人博客</title><meta name="keywords" content="java"><meta name="author" content="董帅"><meta name="copyright" content="董帅"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="##RabbitMQ RabbitMQ的使用场景有哪些？（1）抢购活动，削峰填谷，防止系统崩塌。（2）延迟信息处理，比如10分钟之后给下单未付款的用户发送邮件提醒。（3）解耦系统，对于新增的功能可以单独写模块扩展，比如用户确认评价后，新增了给用户反积分的功能，这个时候不用在业务代码里添加新增积分的功能，只需要吧新增积分的接口订阅确认评价的消息队列即可，后面再添加任何功能只需要订阅对应的消息队列即可">
<meta property="og:type" content="article">
<meta property="og:title" content="java中间件">
<meta property="og:url" content="https://www.shijuevr.top/20220210java%E4%B8%AD%E9%97%B4%E4%BB%B6/index.html">
<meta property="og:site_name" content="董帅的个人博客">
<meta property="og:description" content="##RabbitMQ RabbitMQ的使用场景有哪些？（1）抢购活动，削峰填谷，防止系统崩塌。（2）延迟信息处理，比如10分钟之后给下单未付款的用户发送邮件提醒。（3）解耦系统，对于新增的功能可以单独写模块扩展，比如用户确认评价后，新增了给用户反积分的功能，这个时候不用在业务代码里添加新增积分的功能，只需要吧新增积分的接口订阅确认评价的消息队列即可，后面再添加任何功能只需要订阅对应的消息队列即可">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s4.ax1x.com/2022/02/10/HYNjJg.jpg">
<meta property="article:published_time" content="2022-02-10T02:24:38.000Z">
<meta property="article:modified_time" content="2022-03-03T02:45:58.919Z">
<meta property="article:author" content="董帅">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s4.ax1x.com/2022/02/10/HYNjJg.jpg"><link rel="shortcut icon" href="https://img.zcool.cn/community/01ffdf5b706950a801206a359c7cd6.jpg@1280w_1l_2o_100sh.jpg"><link rel="canonical" href="https://www.shijuevr.top/20220210java%E4%B8%AD%E9%97%B4%E4%BB%B6/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"简","msgToSimplifiedChinese":"繁"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'java中间件',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-03 10:45:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="董帅的个人博客" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img.zcool.cn/community/01ffdf5b706950a801206a359c7cd6.jpg@1280w_1l_2o_100sh.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/my_hpptalk/"><i class="fa-fw fas fa-edit"></i><span> 笨嘴拙舌</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s4.ax1x.com/2022/02/10/HYNjJg.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">董帅的个人博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 相册</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/my_hpptalk/"><i class="fa-fw fas fa-edit"></i><span> 笨嘴拙舌</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">java中间件</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-10T02:24:38.000Z" title="发表于 2022-02-10 10:24:38">2022-02-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-03-03T02:45:58.919Z" title="更新于 2022-03-03 10:45:58">2022-03-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="java中间件"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>##RabbitMQ</p>
<h4 id="RabbitMQ的使用场景有哪些？"><a href="#RabbitMQ的使用场景有哪些？" class="headerlink" title="RabbitMQ的使用场景有哪些？"></a>RabbitMQ的使用场景有哪些？</h4><p>（1）抢购活动，削峰填谷，防止系统崩塌。<br>（2）延迟信息处理，比如10分钟之后给下单未付款的用户发送邮件提醒。<br>（3）解耦系统，对于新增的功能可以单独写模块扩展，比如用户确认评价后，新增了给用户反积分的功能，这个时候不用在业务代码里添加<br>新增积分的功能，只需要吧新增积分的接口订阅确认评价的消息队列即可，后面再添加任何功能只需要订阅对应的消息队列即可。  </p>
<h4 id="RabbitMQ中有哪些角色？"><a href="#RabbitMQ中有哪些角色？" class="headerlink" title="RabbitMQ中有哪些角色？"></a>RabbitMQ中有哪些角色？</h4><p>角色：生产者、消费者、代理<br>（1）生产者：消息的创建者，负责创建和推送数据到消息服务器。<br>（2）消费者：消息的接收方，用于处理数据和确认消息。<br>（3）代理：RabbitMQ本身，扮演”快递”的角色，本身不生产消息，只是扮演”快递”的角色。  </p>
<h4 id="RabbitMQ有哪些重要的组件？"><a href="#RabbitMQ有哪些重要的组件？" class="headerlink" title="RabbitMQ有哪些重要的组件？"></a>RabbitMQ有哪些重要的组件？</h4><p>（1）ConnectionFactory（连接管理器）：应用程序与Rabbit之间建立连接的管理器，程序代码中使用。<br>（2）Channel（信道）：消息推送使用的通道。<br>（3）Exchange（交换器）：用于接收、分配消息。<br>（4）Queue（队列）：用于存储生产者的消息。<br>（5）RoutingKey（路由键）：用于把生成着的数据分配到交换器上。<br>（6）BindingKey（绑定键）：用于把交换器的消息绑定到队列上。  </p>
<h4 id="RabbitMQ中vhost的作用是什么？"><a href="#RabbitMQ中vhost的作用是什么？" class="headerlink" title="#RabbitMQ中vhost的作用是什么？"></a>#RabbitMQ中vhost的作用是什么？</h4><p>Vhost：每个RabbitMQ都能创建很多vhost，我们称之为虚拟主机，每个虚拟主机其实都是mini版的RabbitMQ，它拥有自己的队列，交换器和<br>绑定，拥有自己的权限机制。  </p>
<h4 id="RabbitMQ的消息是怎么发送的？"><a href="#RabbitMQ的消息是怎么发送的？" class="headerlink" title="RabbitMQ的消息是怎么发送的？"></a>RabbitMQ的消息是怎么发送的？</h4><p>首先客户端必须连接到RabbitMQ服务器才能发布和消费消息，客户端和Rabbit server之间会创建一个tcp链接，一旦tcp打开并通过认证（认证<br>就是发送给rabbit服务器的用户名和密码），客户端和RabbitMQ就创建了一条amqp信道（channel），信道是创建在”真实”tcp上的虚拟连接，<br>amqp命令都是通过信道发送出去的，每个信道都会有一个唯一的id，不论是发布消息，订阅队列都是通过这个信道完成的。  </p>
<h4 id="RabbitMQ怎么保证消息的稳定性？"><a href="#RabbitMQ怎么保证消息的稳定性？" class="headerlink" title="RabbitMQ怎么保证消息的稳定性？"></a>RabbitMQ怎么保证消息的稳定性？</h4><p>（1）提供了事物的功能。<br>（2）通过将channel设置为confirm（确认）模式。  </p>
<h4 id="RabbitMQ怎么避免消息丢失？"><a href="#RabbitMQ怎么避免消息丢失？" class="headerlink" title="RabbitMQ怎么避免消息丢失？"></a>RabbitMQ怎么避免消息丢失？</h4><p>（1）把消息持久化磁盘，保证服务器重启消息不丢失。<br>（2）每个集群中至少又一个物理磁盘，保证消息落入磁盘。  </p>
<h4 id="要保证消息持久化成功的条件有哪些？"><a href="#要保证消息持久化成功的条件有哪些？" class="headerlink" title="要保证消息持久化成功的条件有哪些？"></a>要保证消息持久化成功的条件有哪些？</h4><p>（1）声明队列必须设置持久化durable设置为true。<br>（2）消息推送投递模式必须设置持久化，deliveryMode设置为2（持久）。<br>（3）消息已经到达持久化交换器。<br>（4）消息已经到达持久化队列。  </p>
<h4 id="RabbitMQ持久化有什么缺点？"><a href="#RabbitMQ持久化有什么缺点？" class="headerlink" title="RabbitMQ持久化有什么缺点？"></a>RabbitMQ持久化有什么缺点？</h4><p>持久化的缺点就是降低了服务器的吞吐量，因为使用的是磁盘而非内存存储，从而降低了吞吐量。可尽量使用ssd硬盘来缓解吞吐问题。  </p>
<h4 id="RabbitMQ有几种广播模式？"><a href="#RabbitMQ有几种广播模式？" class="headerlink" title="RabbitMQ有几种广播模式？"></a>RabbitMQ有几种广播模式？</h4><p>（1）direct（默认方式）：最基础最简单的模式，发送方把消息发送给订阅方，如果有多个订阅者，默认采取轮询的方式进行消息发送。<br>（2）headers：与direct类似，只是性能很差，此类型几乎用不到。<br>（3）fanout：分发模式，把消息分发给所有订阅着。<br>（4）topic：匹配订阅模式，使用正则匹配到消息队列，能匹配到的都能接受到。  </p>
<h4 id="RabbitMQ怎么实现延迟消息队列？"><a href="#RabbitMQ怎么实现延迟消息队列？" class="headerlink" title="RabbitMQ怎么实现延迟消息队列？"></a>RabbitMQ怎么实现延迟消息队列？</h4><p>延迟队列的实现有两种方式：<br>（1）通过消息过期后进入死信交换器，再由交换器转发到延迟消费队列，实现延迟功能。<br>（2）使用RabbitMQ-delayed-message-exchange插件实现延迟功能。  </p>
<h4 id="RabbitMQ集群有什么用？"><a href="#RabbitMQ集群有什么用？" class="headerlink" title="RabbitMQ集群有什么用？"></a>RabbitMQ集群有什么用？</h4><p>集群主要有以下两个用途：<br>（1）高可用：某个服务器出现问题，整个RabbitMQ还可以继续使用。<br>（2）高容量：集群可以承载更多的消息量。  </p>
<h4 id="RabbitMQ节点的类型有哪些？"><a href="#RabbitMQ节点的类型有哪些？" class="headerlink" title="RabbitMQ节点的类型有哪些？"></a>RabbitMQ节点的类型有哪些？</h4><p>（1）磁盘节点：消息会存储到磁盘。<br>（2）内存节点：消息都存储在内存中，重启服务器消息丢失，性能高于磁盘类型。  </p>
<h4 id="RabbitMQ集群搭建需要注意哪些问题？"><a href="#RabbitMQ集群搭建需要注意哪些问题？" class="headerlink" title="RabbitMQ集群搭建需要注意哪些问题？"></a>RabbitMQ集群搭建需要注意哪些问题？</h4><p>（1）各节点之间使用”-link”连接，此属性不能忽略。<br>（2）各节点使用的erlang cookie值必须相同，此值相当于”秘钥”的功能，用于各节点的认证。<br>（3）整个集群中必须包含一个磁盘节点。  </p>
<h4 id="RabbitMQ每个节点是其他节点的完整拷贝吗？"><a href="#RabbitMQ每个节点是其他节点的完整拷贝吗？" class="headerlink" title="RabbitMQ每个节点是其他节点的完整拷贝吗？"></a>RabbitMQ每个节点是其他节点的完整拷贝吗？</h4><p>不是。原因如下：<br>（1）存储空间的考虑：如果每个节点都拥有所有队列的完全拷贝，这样新增节点不但没有新增存储空间，反而增加了更多的冗余数据。<br>（2）性能的考虑：如果每条消息都需要完整拷贝到每一个集群节点，那新增节点并没有提升处理消息的能力，最多是保持和但节点相同<br>的性能甚至是更糟。  </p>
<h4 id="RabbitMQ集群中唯一一个磁盘节点崩溃了会发生什么情况？"><a href="#RabbitMQ集群中唯一一个磁盘节点崩溃了会发生什么情况？" class="headerlink" title="RabbitMQ集群中唯一一个磁盘节点崩溃了会发生什么情况？"></a>RabbitMQ集群中唯一一个磁盘节点崩溃了会发生什么情况？</h4><p>如果唯一的磁盘节点崩溃了，不能进行以下的操作：<br>（1）不能创建队列。<br>（2）不能创建交换器。<br>（3）不能创建绑定。<br>（4）不能更改权限。<br>（5）不能添加和删除集群节点。<br>唯一磁盘节点崩溃了，集群是可以保持运行的，但不能更改任何的东西。  </p>
<h4 id="RabbitMQ对集群节点停止顺序有要求吗？"><a href="#RabbitMQ对集群节点停止顺序有要求吗？" class="headerlink" title="RabbitMQ对集群节点停止顺序有要求吗？"></a>RabbitMQ对集群节点停止顺序有要求吗？</h4><p>RabbitMQ对集群的停止的顺序是有要求的，应该先关闭内存节点，最后再关闭磁盘节点，如果顺序恰好相反的话，可能会造成消息的丢失。<br>##Kafka</p>
<h4 id="kafka可以脱离zookeeper单独使用吗？"><a href="#kafka可以脱离zookeeper单独使用吗？" class="headerlink" title="kafka可以脱离zookeeper单独使用吗？"></a>kafka可以脱离zookeeper单独使用吗？</h4><p>kafka不能脱离zookeeper单独使用，因为kafka使用zookeeper管理和协调kafka的节点服务器。  </p>
<h4 id="kafka有几种数据保留策略？"><a href="#kafka有几种数据保留策略？" class="headerlink" title="kafka有几种数据保留策略？"></a>kafka有几种数据保留策略？</h4><p>kafka有两种数据保留策略：按照过期时间保留和按照存储的消息大小保留。</p>
<h4 id="kafka同时设置了7天和10G清除数据，到第五天的时候消息达到了10G，这个时候kafka将如何处理？"><a href="#kafka同时设置了7天和10G清除数据，到第五天的时候消息达到了10G，这个时候kafka将如何处理？" class="headerlink" title="#kafka同时设置了7天和10G清除数据，到第五天的时候消息达到了10G，这个时候kafka将如何处理？"></a>#kafka同时设置了7天和10G清除数据，到第五天的时候消息达到了10G，这个时候kafka将如何处理？</h4><p>这个时候kafka会执行数据清除工作，时间和大小不论那个满足条件，都会清空数据。</p>
<h4 id="什么情况会导致kafka运行变慢？"><a href="#什么情况会导致kafka运行变慢？" class="headerlink" title="什么情况会导致kafka运行变慢？"></a>什么情况会导致kafka运行变慢？</h4><p>（1）CPU性能瓶颈。<br>（2）磁盘读写瓶颈。<br>（3）网络瓶颈。  </p>
<h4 id="使用kafka集群需要注意什么？"><a href="#使用kafka集群需要注意什么？" class="headerlink" title="使用kafka集群需要注意什么？"></a>使用kafka集群需要注意什么？</h4><p>（1）集群的数量不是越多越好，最好不超过7个，因为节点越多，消息复制需要的时间就越长，整个群组的吞吐量就越低。<br>（2）集群数量最好是单数，因为超过一半的故障集群就不能用了，设置为单数容错率更高。<br>##Zookeeper</p>
<h4 id="zookeeper是什么？"><a href="#zookeeper是什么？" class="headerlink" title="zookeeper是什么？"></a>zookeeper是什么？</h4><p>zookeeper是一个分布式的，开放源码的分布式应用程序协调服务，是google chubby的开源实现。是hadoop和hbase的<br>重要组件。它是一个分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。</p>
<h4 id="zookeeper都有哪些功能？"><a href="#zookeeper都有哪些功能？" class="headerlink" title="zookeeper都有哪些功能？"></a>zookeeper都有哪些功能？</h4><p>（1）集群管理：监控节点存活状态、运行请求等。<br>（2）主节点选举：主节点挂掉了之后可以从备用的节点开始新一轮选主，主节点选举说的就是这个选举的过程。<br>使用zookeeper可以协助完成这个过程。<br>（3）分布式锁：zookeeper提供两种锁：独占锁、共享锁。独占锁即一次只能有一个线程使用资源，共享锁是读锁共享，读写互斥，<br>即可以有多线线程同时读同一个资源，如果要使用写锁也只能有一个线程使用。zookeeper可以对分布式锁进行控制。<br>（4）命名服务：在分布式系统中，通过使用命名服务，客户端应用能够根据指定名字来获取资源或服务器的地址，提供者等信息。</p>
<h4 id="zookeeper有几种部署模式？"><a href="#zookeeper有几种部署模式？" class="headerlink" title="zookeeper有几种部署模式？"></a>zookeeper有几种部署模式？</h4><p>zookeeper有三种部署模式：<br>（1）单机部署：一台集群上运行。<br>（2）集群部署：多台集群运行。<br>（3）一台集群启动多个zookeeper实例运行。  </p>
<h4 id="zookeeper怎么保证主从节点的状态同步？"><a href="#zookeeper怎么保证主从节点的状态同步？" class="headerlink" title="zookeeper怎么保证主从节点的状态同步？"></a>zookeeper怎么保证主从节点的状态同步？</h4><p>zookeeper 的核心是原子广播，这个机制保证了各个 server 之间的同步。实现这个机制的协议叫做 zab 协议。 zab 协议有两种模式，分别是恢复模式（选主）和广播模式（同步）。当服务启动或者在领导者崩溃后，zab 就进入了恢复模式，当领导者被选举出来，且大多数 server 完成了和 leader 的状态同步以后，恢复模式就结束了。状态同步保证了 leader 和 server 具有相同的系统状态。</p>
<h4 id="集群中为什么要有主节点？"><a href="#集群中为什么要有主节点？" class="headerlink" title="集群中为什么要有主节点？"></a>集群中为什么要有主节点？</h4><p>在分布式环境中，有些业务逻辑只需要集群中的某一台机器进行执行，其他的机器可以共享这个结果，这样可以大大减少重复计算，提高性能，所以就需要主节点。</p>
<h4 id="集群中有三台服务器，其中一个节点宕机，这个时候zookeeper还可以使用吗？"><a href="#集群中有三台服务器，其中一个节点宕机，这个时候zookeeper还可以使用吗？" class="headerlink" title="集群中有三台服务器，其中一个节点宕机，这个时候zookeeper还可以使用吗？"></a>集群中有三台服务器，其中一个节点宕机，这个时候zookeeper还可以使用吗？</h4><p>可以继续使用，单数服务器只要没超过一半的服务器宕机就可以继续使用。</p>
<h4 id="说一下-zookeeper-的通知机制？"><a href="#说一下-zookeeper-的通知机制？" class="headerlink" title="说一下 zookeeper 的通知机制？"></a>说一下 zookeeper 的通知机制？</h4><p>客户端端会对某个 znode 建立一个 watcher 事件，当该 znode 发生变化时，这些客户端会收到 zookeeper 的通知，然后客户端可以根据 znode 变化来做出业务上的改变。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">董帅</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.shijuevr.top/20220210java%E4%B8%AD%E9%97%B4%E4%BB%B6/">https://www.shijuevr.top/20220210java%E4%B8%AD%E9%97%B4%E4%BB%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.shijuevr.top" target="_blank">董帅的个人博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a></div><div class="post_share"><div class="social-share" data-image="https://s4.ax1x.com/2022/02/10/HYNjJg.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/20220223Spring%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="https://s4.ax1x.com/2022/02/09/H806e0.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Spring源码阅读笔记</div></div></a></div><div class="next-post pull-right"><a href="/20220209%E7%AC%AC%E4%B8%83%E8%8A%82-FrameConverter%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%8F%8ACanvasFrame%E5%9B%BE%E5%83%8F%E9%A2%84%E8%A7%88%E5%B7%A5%E5%85%B7%E7%B1%BB/"><img class="next-cover" src="https://s4.ax1x.com/2022/02/10/HYQ3vT.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">第七节 FrameConverter转换工具类及CanvasFrame图像预览工具类</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/20220418MinIO/" title="分布式文件系统MinIO"><img class="cover" src="https://s1.ax1x.com/2022/04/24/L4O3ZV.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-18</div><div class="title">分布式文件系统MinIO</div></div></a></div><div><a href="/20211201exercises/" title="java题库"><img class="cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi2.hdslb.com%2Fbfs%2Farchive%2F540e03f9ba1527258a27e6a0f31aacc59c6a5ec6.jpg&refer=http%3A%2F%2Fi2.hdslb.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1654421952&t=e363fdea62ccee37819c1f9151cd51ea" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-01</div><div class="title">java题库</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img.zcool.cn/community/01ffdf5b706950a801206a359c7cd6.jpg@1280w_1l_2o_100sh.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">董帅</div><div class="author-info__description">总结工作中的问题、记录生活中的片段</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Dong2048"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.shijuevr.top/atom.xml" target="_blank" title="订阅"><i class="fas fa-rss"></i></a><a class="social-icon" href="mailto:shuaid@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://weibo.com/u/3197883960" target="_blank" title="微博"><i class="fab fa-weibo"></i></a><a class="social-icon" href="https://preview.cloud.189.cn/image/imageAction?param=31C28F5A4F8CA57461E99FE12B6CB58B8BAEBEB37378CFABF194F3E13AC187176F8F7F107CFAEF849D9591BC9F13D7D559DA2E32BD8421926EDA6A6B95404F80A33FE2B230A7B6B21C9DCD37BF410A5D10A96463D3EC450A6936293502877B76A320A88C6DE7D6558DE998CF7327529DE7B7B523" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">RabbitMQ的使用场景有哪些？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E4%B8%AD%E6%9C%89%E5%93%AA%E4%BA%9B%E8%A7%92%E8%89%B2%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">RabbitMQ中有哪些角色？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%9C%89%E5%93%AA%E4%BA%9B%E9%87%8D%E8%A6%81%E7%9A%84%E7%BB%84%E4%BB%B6%EF%BC%9F"><span class="toc-number">3.</span> <span class="toc-text">RabbitMQ有哪些重要的组件？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E4%B8%ADvhost%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">4.</span> <span class="toc-text">#RabbitMQ中vhost的作用是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E7%9A%84%E6%B6%88%E6%81%AF%E6%98%AF%E6%80%8E%E4%B9%88%E5%8F%91%E9%80%81%E7%9A%84%EF%BC%9F"><span class="toc-number">5.</span> <span class="toc-text">RabbitMQ的消息是怎么发送的？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A7%EF%BC%9F"><span class="toc-number">6.</span> <span class="toc-text">RabbitMQ怎么保证消息的稳定性？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%80%8E%E4%B9%88%E9%81%BF%E5%85%8D%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1%EF%BC%9F"><span class="toc-number">7.</span> <span class="toc-text">RabbitMQ怎么避免消息丢失？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A6%81%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E6%8C%81%E4%B9%85%E5%8C%96%E6%88%90%E5%8A%9F%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">8.</span> <span class="toc-text">要保证消息持久化成功的条件有哪些？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%89%E4%BB%80%E4%B9%88%E7%BC%BA%E7%82%B9%EF%BC%9F"><span class="toc-number">9.</span> <span class="toc-text">RabbitMQ持久化有什么缺点？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%9C%89%E5%87%A0%E7%A7%8D%E5%B9%BF%E6%92%AD%E6%A8%A1%E5%BC%8F%EF%BC%9F"><span class="toc-number">10.</span> <span class="toc-text">RabbitMQ有几种广播模式？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E5%BB%B6%E8%BF%9F%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%EF%BC%9F"><span class="toc-number">11.</span> <span class="toc-text">RabbitMQ怎么实现延迟消息队列？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E9%9B%86%E7%BE%A4%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">12.</span> <span class="toc-text">RabbitMQ集群有什么用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E8%8A%82%E7%82%B9%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">13.</span> <span class="toc-text">RabbitMQ节点的类型有哪些？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E5%93%AA%E4%BA%9B%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">14.</span> <span class="toc-text">RabbitMQ集群搭建需要注意哪些问题？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E6%AF%8F%E4%B8%AA%E8%8A%82%E7%82%B9%E6%98%AF%E5%85%B6%E4%BB%96%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%8C%E6%95%B4%E6%8B%B7%E8%B4%9D%E5%90%97%EF%BC%9F"><span class="toc-number">15.</span> <span class="toc-text">RabbitMQ每个节点是其他节点的完整拷贝吗？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E9%9B%86%E7%BE%A4%E4%B8%AD%E5%94%AF%E4%B8%80%E4%B8%80%E4%B8%AA%E7%A3%81%E7%9B%98%E8%8A%82%E7%82%B9%E5%B4%A9%E6%BA%83%E4%BA%86%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%EF%BC%9F"><span class="toc-number">16.</span> <span class="toc-text">RabbitMQ集群中唯一一个磁盘节点崩溃了会发生什么情况？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RabbitMQ%E5%AF%B9%E9%9B%86%E7%BE%A4%E8%8A%82%E7%82%B9%E5%81%9C%E6%AD%A2%E9%A1%BA%E5%BA%8F%E6%9C%89%E8%A6%81%E6%B1%82%E5%90%97%EF%BC%9F"><span class="toc-number">17.</span> <span class="toc-text">RabbitMQ对集群节点停止顺序有要求吗？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#kafka%E5%8F%AF%E4%BB%A5%E8%84%B1%E7%A6%BBzookeeper%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8%E5%90%97%EF%BC%9F"><span class="toc-number">18.</span> <span class="toc-text">kafka可以脱离zookeeper单独使用吗？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#kafka%E6%9C%89%E5%87%A0%E7%A7%8D%E6%95%B0%E6%8D%AE%E4%BF%9D%E7%95%99%E7%AD%96%E7%95%A5%EF%BC%9F"><span class="toc-number">19.</span> <span class="toc-text">kafka有几种数据保留策略？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#kafka%E5%90%8C%E6%97%B6%E8%AE%BE%E7%BD%AE%E4%BA%867%E5%A4%A9%E5%92%8C10G%E6%B8%85%E9%99%A4%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%88%B0%E7%AC%AC%E4%BA%94%E5%A4%A9%E7%9A%84%E6%97%B6%E5%80%99%E6%B6%88%E6%81%AF%E8%BE%BE%E5%88%B0%E4%BA%8610G%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%97%B6%E5%80%99kafka%E5%B0%86%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%EF%BC%9F"><span class="toc-number">20.</span> <span class="toc-text">#kafka同时设置了7天和10G清除数据，到第五天的时候消息达到了10G，这个时候kafka将如何处理？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%BC%9A%E5%AF%BC%E8%87%B4kafka%E8%BF%90%E8%A1%8C%E5%8F%98%E6%85%A2%EF%BC%9F"><span class="toc-number">21.</span> <span class="toc-text">什么情况会导致kafka运行变慢？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8kafka%E9%9B%86%E7%BE%A4%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">22.</span> <span class="toc-text">使用kafka集群需要注意什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zookeeper%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">23.</span> <span class="toc-text">zookeeper是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zookeeper%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E5%8A%9F%E8%83%BD%EF%BC%9F"><span class="toc-number">24.</span> <span class="toc-text">zookeeper都有哪些功能？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zookeeper%E6%9C%89%E5%87%A0%E7%A7%8D%E9%83%A8%E7%BD%B2%E6%A8%A1%E5%BC%8F%EF%BC%9F"><span class="toc-number">25.</span> <span class="toc-text">zookeeper有几种部署模式？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zookeeper%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E4%B8%BB%E4%BB%8E%E8%8A%82%E7%82%B9%E7%9A%84%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%EF%BC%9F"><span class="toc-number">26.</span> <span class="toc-text">zookeeper怎么保证主从节点的状态同步？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E4%B8%AD%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E4%B8%BB%E8%8A%82%E7%82%B9%EF%BC%9F"><span class="toc-number">27.</span> <span class="toc-text">集群中为什么要有主节点？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9C%89%E4%B8%89%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9%E5%AE%95%E6%9C%BA%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%97%B6%E5%80%99zookeeper%E8%BF%98%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E5%90%97%EF%BC%9F"><span class="toc-number">28.</span> <span class="toc-text">集群中有三台服务器，其中一个节点宕机，这个时候zookeeper还可以使用吗？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B4%E4%B8%80%E4%B8%8B-zookeeper-%E7%9A%84%E9%80%9A%E7%9F%A5%E6%9C%BA%E5%88%B6%EF%BC%9F"><span class="toc-number">29.</span> <span class="toc-text">说一下 zookeeper 的通知机制？</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/20220620pattern/" title="pattern"><img src="https://s4.ax1x.com/2022/02/09/H806e0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pattern"/></a><div class="content"><a class="title" href="/20220620pattern/" title="pattern">pattern</a><time datetime="2022-06-20T02:46:42.000Z" title="发表于 2022-06-20 10:46:42">2022-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/20220418MinIO/" title="分布式文件系统MinIO"><img src="https://s1.ax1x.com/2022/04/24/L4O3ZV.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式文件系统MinIO"/></a><div class="content"><a class="title" href="/20220418MinIO/" title="分布式文件系统MinIO">分布式文件系统MinIO</a><time datetime="2022-04-18T06:24:38.000Z" title="发表于 2022-04-18 14:24:38">2022-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/20220402shardingsphere-Proxy/" title="shardingsphere-Proxy"><img src="https://w.wallhaven.cc/full/y8/wallhaven-y89del.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="shardingsphere-Proxy"/></a><div class="content"><a class="title" href="/20220402shardingsphere-Proxy/" title="shardingsphere-Proxy">shardingsphere-Proxy</a><time datetime="2022-04-02T06:57:07.000Z" title="发表于 2022-04-02 14:57:07">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/20220223Spring%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" title="Spring源码阅读笔记"><img src="https://s4.ax1x.com/2022/02/09/H806e0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring源码阅读笔记"/></a><div class="content"><a class="title" href="/20220223Spring%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" title="Spring源码阅读笔记">Spring源码阅读笔记</a><time datetime="2022-02-23T09:40:02.000Z" title="发表于 2022-02-23 17:40:02">2022-02-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/20220210java%E4%B8%AD%E9%97%B4%E4%BB%B6/" title="java中间件"><img src="https://s4.ax1x.com/2022/02/10/HYNjJg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java中间件"/></a><div class="content"><a class="title" href="/20220210java%E4%B8%AD%E9%97%B4%E4%BB%B6/" title="java中间件">java中间件</a><time datetime="2022-02-10T02:24:38.000Z" title="发表于 2022-02-10 10:24:38">2022-02-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s4.ax1x.com/2022/02/10/HYNjJg.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 董帅</div><div class="footer_custom_text">本站部分文章、资源来自互联网，版权归原作者及网站所有，如果侵犯了您的权利请及时通知本站，予以删除。<br/> 版权声明：凡注明本站原创文章、作品，未经站长许可，任何人或机构不得以任何形式对本站内容进行复制作商业用途。对于不遵守此声明或者其他违法使用本文内容者，依法保留追究权等。<br/> 站长邮箱：shuaid@foxmail.com <br/> 京ICP备2021008068号-1</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-dong2048.vercel.app/',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'https://twikoo-dong2048.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?Dong2048";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="Dong2048";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>