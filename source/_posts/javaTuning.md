---
title: javaTuning
date: 2021-11-15 09:18:46
tags: java,技术
category: 笔记
---
### java虚拟机基本说明
#### 1、JVM(虚拟机)介绍
JVM是指用软件的方式模拟具有完整硬件系统功能、运行在一个完全隔离环境中的完整计算机系统，是物理机的软件实现。
#### 2、JVM内部组成部分
举例：执行以下命令：
``` bash
java Math.class
``` 
第一步：**类装载子系统**将字节码文件"java.Math.class"装载到**内存区域（内存模型、运行时数据区）**。

第二步：**执行引擎子系统**执行程序
#### 3、类的加载介绍
将class文件中的二进制数据加载到内存中，放置在内存区域中的方法区内，然后在堆区中创建一个class对象，此class对象是类加载最后的成果。
#### 4、类的加载的过程
1. 【加载】通过IO读入字节码文件。
2. 【连接】执行验证、准备、解析步骤。
3. 【初始化】对类的静态变量初始化指定的值，执行静态代码块。
4. 【使用】
5. 【卸载】
#### 5、类加载器种类
1. 【启动类加载器】加载支撑JVM运行的位于JRE的lib目录下的核心类库，比如rt.jar、charsets.jar。
2. 【扩展类加载器】加载支撑JVM运行的位于JRE的lib目录下的ext扩展目录中的JAR类包。
3. 【应用程序类加载器】加载ClassPath路径下的类包，主要是加载人为编写的类。
4. 【自定义加载器】负责加载用户自定义路径下的类包。
#### 6、JVM运行时内存区域的划分
以线程是否私有分为两部分  
第一部分线程私有区域如下：
1. 【程序计数器】记录字节码执行的行号；（唯一不会产生内存溢出的地方）
2. 【java虚拟机栈】 当java中的方法被执行时会形成**栈帧**放入到栈内存当中（压栈），执行完后**栈帧**移出（弹栈）；栈帧细分为：局部变量表、操作数栈、方法出口等一系列内存区域。
3. 【本地方法栈】
第二部分线程共有区域如下：
1. 【堆内存】分配所有对象实例的地方，垃圾回收的主要区域。（所有内存最大的一块）
2. 【元数据区（方法区）】虚拟机加载的类信息常量、静态变量。
3. 【直接内存】非JVM内存的堆外内存，NIO会操作，读写效率高。
#### 7、JVM内存分配与回收策略
首先对象优先在Eden区分配，new出来的对象放在堆内存里面